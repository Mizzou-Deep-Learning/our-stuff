from Tkinter import Tk
from tkFileDialog import askopenfilename
import pandas as pd
import numpy as np
import matplotlib
matplotlib.use("tkAgg")
import matplotlib.pyplot as plt
import scipy.fftpack
from scipy import signal


Tk().withdraw()
filename = 'training_mood.csv'#askopenfilename()
Utime = 15.5
Ltime = 15
fields =['period', 'time','HR']
df = pd.read_csv(filename, usecols=fields)
#ddf = df.dropna()
ddf = df
print ddf
#plt.show( ddf.plot(kind = 'scatter', x = 'time' , y = 'HR', c = 'c'))
#ddf = ddf[ddf.time%2 == 0]
NFFT = 32       # the length of the windowing segments
Fs = 2#len(ddf['HR'])#len(ddf['HR'])  # the sampling frequency       ### THIS IS THE Y AXIS


ddf = ddf[ddf.period == '10/4/2014']

#for
dddf = ddf
dddf = dddf[dddf.time > Ltime]
dddf = dddf[dddf.time < Utime]


print len(dddf['period'])
print len(ddf['period'])
print dddf


ax = plt.subplot(111)

plt.axis('off')
#ax.axis('tight')
imgNum = 0

Pxx, freqs, bins, im = plt.specgram(dddf['HR'],
                                    NFFT=NFFT, pad_to=NFFT, noverlap=31,
                                    Fs=Fs)#,
                                #cmap=plt.cm.gist_heat)
plt.savefig('img/pic' + imgNum + '.png', bbox_inches='tight', pad_inches = 0)
plt.show()
